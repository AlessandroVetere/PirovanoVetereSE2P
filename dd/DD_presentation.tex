\documentclass{../common/latex_classes/pdf_presentation}

\newcommand{\itemBold}[1]{\item\textbf{#1:}}
\newcommand{\showGeneralDiagram}[2]{\showPercentImage{./section_2/general_diagram_dd.png}{#1}{#2}}
\newcommand{\showComponentDiagram}[2]{\showPercentImage{./section_2/component_diagram/component_diagram.png}{#1}{#2}}
\newcommand{\showDeploymentDiagram}[2]{\showPercentImage{./section_2/deployment_diagram/deployment_diagram.png}{#1}{#2}}
\newcommand{\showSequenceDiagram}[3]{\showPercentImage{./section_2/sequence_diagrams/#1_sequence_diagram.png}{#2}{#3}}
\newcommand{\showRPMockupImage}[2]{\showImage{../srs/section_3/mockups/png_passenger/#1.png}{#2}}
\newcommand{\showTDMockupImage}[2]{\showPercentImage{../srs/section_3/mockups/png_driver/#1.png}{#2}{0.3}}
\newcommand{\showAdminMockupImage}[2]{\showPercentImage{./section_4/mockups/administrator_mockups/#1.png}{#2}{0.95}}

\title{DD Presentation}

\subject{A brief presentation of myTaxiService DD}
% This is only inserted into the PDF information catalog. Can be left
% out. 

% Let's get started
\begin{document}
	\titleToc{}
	\section{Architectural Design}
	
	\subsection{Overview}
	
	\begin{frame}{Overview Diagram}
		\showGeneralDiagram{Overview Diagram}{1.0}
	\end{frame}
	
	\subsection{High level components and their interaction}
	
	\begin{frame}{High level components and their interaction}
		The system has many distributed components: those will communicate with a \textbf{Client-Server} style and through \textbf{Point to Point} messaging system. 
		\begin{itemize}
			\item The \textbf{Client-Server} style is used in order to receive different requests (e.g. a Taxi Reservation request) from the many Clients connected to the Server to use the service. 
			
			\item The \textbf{Point to Point} bidirectional communication channel is made necessary to enable the Server the delivery of various messages and requests to the Clients:
			\begin{itemize}
				\item Generic notifications
				\item Service messages
				\item The request of serving a Taxi Ride
				\item The request of an updating GPS Data.
			\end{itemize}
		\end{itemize}
	\end{frame}
	
	\begin{frame}{Layers}
		The software architecture that has been chosen follows the principles of the Model View Controller architectural pattern. 
		
		Therefore three main software components have been identified and those are:
		\begin{itemize}
			\item The Model
			\item The View 
			\item The Controller.
		\end{itemize}
		
		\textbf{Model}, \textbf{View} and \textbf{Controller} are then mapped to three different relevant software Layers:
	\end{frame}
	
	\begin{frame}{Layers - View}
		The role of this Layer is the one of processing remote \textbf{Clients} commands, and convert them into requests addressed to the \textbf{Controller} layer, that is connected to the \textbf{View} through a communication facility (e.g. The Internet).
		There exists four different types of View, each one designed specifically for the particular Client:
		\begin{itemize}
			\item Passenger Web View
			\item Passenger Application View
			\item Taxi Driver Application View
			\item Administrator View
		\end{itemize}
	\end{frame}
	
	\begin{frame}{Layers - Controller}
		This second Layer is composed itself of two families of components with specialized functionalities:
		\begin{itemize}
			\item \textbf{Networking Components Family:}
			\begin{itemize}
				\item Groups the software components that are involved in sending messages to the various Views, following the logic implements in the Business Components Family. 
				\item Dispatches to the various business components.
			\end{itemize}
			\item \textbf{Business Components Family:} In this family are included all the software components that implement the system logic.
			Their role is:
			\begin{itemize}
				\item Processing requests 
				\item Generating either responses or asynchronous events.
			\end{itemize}
		\end{itemize}
	\end{frame}
	
	\begin{frame}{Layers - Model}
		The third and last Layer is the \textbf{Model}: it should:
		\begin{itemize}
			\item Guarantee a high level interface to store and manage all the \myTaxiService{} relevant data. 
			\item It abstracts a \textbf{Relational Database} in a software component that is in direct connection with the \textbf{Controller}.
		\end{itemize}
	\end{frame}
	
	\begin{frame}{Tiers}
		The system is divided in \textbf{four} different Tiers:
		\begin{itemize}
			\item \textbf{Clients:} The distributed clients of the application.
			\item \textbf{Web Server:} A server that is in charge of dynamically generate web pages and of receiving requests through the web.
			\item \textbf{Application Server:} This is the most important Tier of the system. Here are done all the logics and calculations that constitute the core part of \myTaxiService{}.
			\item \textbf{Database Server:} In this Tier it is hosted the Database that allows the service data persistence.
		\end{itemize}
	\end{frame}
	
	\subsection{Component View}
	
	\begin{frame}{Component View}
		Several components has been designed to provide all the functionalities needed for \myTaxiService{} to work.
		Five mayor subsystems have been found:
		\begin{itemize}
			\item Passenger View, Taxi Driver View, Taxi Driver Model
			\item Controller
			\item Model
		\end{itemize}
	\end{frame}
	
	
	\begin{frame}{Component View - Diagram}
		This diagram maps system features into different software components, and show how these components are divided in different subsystems.
		\showComponentDiagram{UML Component Diagram}{0.475}
	\end{frame}
	
	\subsection{Deployment View}
		
	\begin{frame}{Deployment View}
		The best way found to deploy the software components identified into different machines, is to consider 7 (8 if considering the Google Server contacted to use Google Maps API) different nodes:
		\begin{itemize}
			\item Passenger Web Browser, Passenger Smartphone, Taxi Driver Smartphone, Administrator Workstation
			\item Web Server
			\item Application Server
			\item Database Server
		\end{itemize}
	\end{frame}		
		
	\begin{frame}{Deployment View - Diagram}
		The following diagram shows how software components are mapped into the physical system.
		%TODO Collegamento GOOGLE SERVER <-> LOCATION MANAGER andrebbe reso un collegamento GOOGLE SERVER <-> WEB SERVER, per coerenza con quanto deciso di fare, cioè di avere solo il web server collegato ad internet
		\showDeploymentDiagram{UML Deployment Diagram}{0.625}
	\end{frame}
	
	\subsection{Runtime View}
		
	\begin{frame}{Runtime View}
		In this subsection are proposed the most meaningful \textbf{UML Sequence Diagrams} to show how software components interacts in order to deliver a specific functionality.
		These functionalities are:
		\begin{itemize}
			\item Taxi Driver Registration (done by an Administrator)
			\item Passenger Login
			\item Handling of a new Taxi Ride (2 diagrams)
			%TODO Il diagramma è mega complesso. Mettiamo o glissiamo?
			\item Update of Taxi Drivers' positions
		\end{itemize}
	\end{frame}
	
	\begin{frame}{Taxi Driver Registration}
		\showSequenceDiagram{admin_td_reg}{UML Sequence Diagram}{0.7}
	\end{frame}
	
	\begin{frame}{Passenger Login}
		\showSequenceDiagram{ps_login}{UML Sequence Diagram}{0.575}
	\end{frame}
	
	\begin{frame}{Handling of a new Taxi Ride - 1/2}
		\showSequenceDiagram{taxi_ride_arrived_handling}{UML Sequence Diagram}{0.9}
	\end{frame}
	
	\begin{frame}{Handling of a new Taxi Ride - 2/2}
		\showSequenceDiagram{tr_timer_expired}{UML Sequence Diagram}{0.9}
	\end{frame}
	
	\begin{frame}{Update of Taxi Drivers' positions}
		\showSequenceDiagram{td_position_association}{UML Sequence Diagram}{0.575}
	\end{frame}
	
	\subsection{Component Interfaces}
		
	\begin{frame}{Component Interfaces}
		Being our system composed of different software components that need to interact together, several interfaces have been put among them.
		%TODO Secondo me questa sezione va tolta, si parla una volta sola per tutte delle interfacce usando il UML Component Diagram e poi il UML Deployment Diagram.
	\end{frame}
	
	\subsection{Selected architectural styles and patterns}
	\begin{frame}{Selected architectural styles and patterns - MVC}
		Several architectural styles and patterns were chosen in order to build \myTaxiService{} as a modern software.
		The main pattern that was recursively adopted is the \textbf{Model View Controller} architectural pattern:
		\begin{itemize}
			\item \textbf{System Level:} All the clients that use \myTaxiService{} (i.e. the Passengers, the Taxi Drivers, and the Administrator) are seen as Views,
			that following the Cocoa MVC pattern, are connected to a Controller,
			the Web Server or the Application Server, that is itself connected to
			the Model that is hosted on the Database Server.
			\item \textbf{Client Level}
			\item \textbf{Server Level}
			\begin{itemize}
				\item Web Server
				\item Application Server
				\item Database Server
			\end{itemize}
		\end{itemize}
	\end{frame}
	
	\begin{frame}{Selected architectural styles and patterns - Client-Server}
		Alongside the \textbf{MVC} architectural pattern, also the \textbf{Client-Server} style is used for all the requests done by the various clients connected to the Web Server of \myTaxiService{}. The \textbf{Taxi Driver Application} and the \textbf{Passenger Application} can use a standardized \textbf{Client-Server} protocol via \textbf{HTTPS} that follows the principle of a \textbf{RESTful Service}. The \textbf{Administrator} application its connected via \textbf{RPC} to the \textbf{Web Server} and can perform more critical requests, like the registration of a new \textbf{Taxi Driver} into the system. It is required that the \textbf{Administrator} application opens a \textbf{RPC} connection to the \textbf{Web Server} to start the communication.
	\end{frame}
	
	\begin{frame}{Selected architectural styles and patterns - Point to Point}
		A \textbf{Point to Point} bidirectional messaging system is established between the \textbf{Clients} and the \textbf{Web Server} at the \textit{boot} of the client application. The client should explicitly request a connection to the server that is listening for clients' connections. It is the connection over \textbf{Web Socket} protocol that allows the \textbf{Web Server} to send asynchronous messages and requests to which the client can respond using the same channel. The main reasons why this protocol is used are sending a \textbf{Taxi Ride} proposal to a given \textbf{Taxi Driver}, that can either accept or deny the proposal, and allowing the server to ask the \textbf{Taxi Driver} an updated geolocation data.
	\end{frame}
	
	\begin{frame}{Selected architectural styles and patterns - Conclusion}
		The \textbf{Client-Server} style and \textbf{Point to Point} bidirectional messaging system are used to implement properly the \textbf{MVC} pattern in this three \textbf{Layers}, four \textbf{Tiers} system.
	\end{frame}
	
	\subsection{Other design decisions}
		
	\begin{frame}{Other design decisions - HTTPS and Web Socket}
		Several technologies have been chosen in order to best fit the needs of the system to be.
		Not all the required functionalities of \myTaxiService{} are already mapped onto specific products because in those cases the choice done would matter less.
		But for the cases in which a technology has already been proposed, it is because a clear design decision was mandatory.
		As for the communication protocols between clients (excluded the Administrator client) and the server have been chosen:
		\begin{itemize}
			\itemBold{HTTPS} The secure version of \textbf{HTTP} was a mandatory choice as security and privacy concerns are of major importance nowadays.
			\itemBold{Web Socket} This innovative socket technology has been chosen although is relatively new because it implements a full duplex socket communication channel using web technology and therefore using the port 80, which is in almost every case not blocked by any firewall.
		\end{itemize}
	\end{frame}
	
	
	\begin{frame}{Other design decisions - Internet and Firewalls}
		For what concerns the network reachability has been chosen to make discoverable only the Web Server through the assignment to it of a public IP.
		All the other servers in \myTaxiService{} system should be reachable only within the enterprise network.
		Between the \textbf{Web Server} and the external network is installed a firewall that controls all the incoming connections.
		In particular it must accept only incoming \textbf{HTTPS} connections, \textbf{Web Socket} connections and \textbf{RPC} connections.
		A firewall is also used to protected the Database Server from the \textbf{Application Server} in the unlikely case that the \textbf{Application Server} is attacked through the \textbf{Web Server} or the \textbf{Application Server} for some reasons stops working correctly and start behaving in a way that will damage the application \textbf{Model}.
	\end{frame}
	
	
	\section{Algorithm Design}
	
	\subsection{Taxi Rides Serving Management}
	
	\begin{frame}{Taxi Rides Serving Management}
	\end{frame}
	
	\subsection{Geolocation}
	
	\begin{frame}{Geolocation}
	\end{frame}
	
	\section{User Interface Design}
	
	\subsection{Passenger Mockups}
	
	\begin{frame}{Passenger Mockups}
	\end{frame}
	
	\subsection{Taxi Driver Mockups}
	
	\begin{frame}{Taxi Driver Mockups}
	\end{frame}
	
	\subsection{Administrator Mockups}
	
	\begin{frame}{Administrator Mockups}
	\end{frame}
	
\end{document}