\documentclass{../common/latex_classes/pdf_presentation}

\newcommand{\itemBold}[1]{\item\textbf{#1:}}
\newcommand{\showGeneralDiagram}[2]{\showPercentImage{./section_2/general_diagram_dd.png}{#1}{#2}}
\newcommand{\showComponentDiagram}[2]{\showPercentImage{./section_2/component_diagram/component_diagram.png}{#1}{#2}}
\newcommand{\showDeploymentDiagram}[2]{\showPercentImage{./section_2/deployment_diagram/deployment_diagram.png}{#1}{#2}}
\newcommand{\showSequenceDiagram}[3]{\showPercentImage{./section_2/sequence_diagrams/#1_sequence_diagram.png}{#2}{#3}}
\newcommand{\showRPMockupImage}[3]{\showPercentImage{../srs/section_3/mockups/png_passenger/#1.png}{#2}{#3}}
\newcommand{\showTDMockupImage}[3]{\showPercentImage{../srs/section_3/mockups/png_driver/#1.png}{#2}{#3}}
\newcommand{\showAdminMockupImage}[3]{\showPercentImage{./section_4/mockups/administrator_mockups/#1.png}{#2}{#3}}

\title{DD Presentation}

\subject{A brief presentation of myTaxiService DD}
% This is only inserted into the PDF information catalog. Can be left
% out. 

% Let's get started
\begin{document}
	\titleToc{}
	\section{Architectural Design}
	
	\subsection{High level components and their interaction}
	
	\begin{frame}{High level components and their interaction}
		The system is composed by many \textbf{distributed} components: those will communicate with a \textbf{Client-Server} style and through \textbf{Point to Point} messaging system. 
		\begin{itemize}
			\item The \textbf{Client-Server} style is used to give the the many Clients connected to the Server the opportunity of sending different requests (e.g. a \textbf{Taxi Ride Reservation} or \textbf{Taxi Ride Request}).
			\item The \textbf{Point to Point} bidirectional communication channel is made necessary to enable the Server the delivery of various messages and requests to the Clients:
			\begin{itemize}
				%TODO un esempio per ogni item (e.g. ...)
				\item Generic notifications
				\item Service messages
				\item The request of serving a Taxi Ride
				\item The request of an updating GPS Data.
			\end{itemize}
		\end{itemize}
	\end{frame}
	
	\begin{frame}{Layers}
		The selected software architecture follows the principles of the \textbf{Model View Controller} architectural pattern. 
		
		Therefore three main software components have been identified and those are:
		\begin{itemize}
			\item The Model
			\item The View 
			\item The Controller.
		\end{itemize}
		
		\textbf{Model}, \textbf{View} and \textbf{Controller} are then mapped to three different relevant software Layers:
	\end{frame}
	
	\begin{frame}{Layers - View}
		The role of this Layer is the one of processing remote \textbf{Clients} commands, and convert them into requests addressed to the \textbf{Controller} layer, that is connected to the \textbf{View} through a communication facility (e.g. The Internet).
		We imagine four different types of View, each one designed specifically to access \myTaxiService{} system in a different way and by a different kind of users:
		\begin{itemize}
			\item Passenger Web View
			\item Passenger Application View
			\item Taxi Driver Application View
			\item Administrator View
		\end{itemize}
	\end{frame}
	
	\begin{frame}{Layers - Controller}
		This second Layer is conceptually splitted in three families of components with specialized functionalities:
		\begin{itemize}
			\item \textbf{Networking Components Family:}
			\begin{itemize}
				\item Groups the \textbf{Communication Components} that are involved in sending messages to the various Views, following the logic implements in the Business Components Family. 
				\item Dispatches a particular request to the relative \textbf{Business Managing Component}.
			\end{itemize}
			\item \textbf{Business Components Family:} In this family are included all the software components that implement the system logic.
			Their role is:
			\begin{itemize}
				\item Processing requests 
				\item Generating either \textbf{synchronous responses} (e.g registration or login procedure) or \textbf{asynchronous events} (e.g adding a \textbf{Taxi Ride} and sending a \textbf{Taxi Driver}).
			\end{itemize}
			\item \textbf{Query Manager} It has the responsibility of \textbf{receiving} and \textbf{handling} all the model updating needs of the \textbf{Business Components}. Moreover it has to guarantee \textbf{parallelism} and \textbf{execution speed}.
		\end{itemize}
	\end{frame}
	
	\begin{frame}{Layers - Model}
		The third and last Layer is the \textbf{Model}: it should:
		\begin{itemize}
			\item Guarantee a high level interface to store and manage all the \myTaxiService{} relevant data. 
			\item Abstract a \textbf{Relational Database} in a software component that is in direct connection with the \textbf{Controller} (e.g Model Query Service).
		\end{itemize}
	\end{frame}
	
	\begin{frame}{Tiers}
		The system is divided in \textbf{four} different Tiers:
		\begin{itemize}
			\item \textbf{Clients:} The distributed clients of the application.
			\item \textbf{Web Server:} An intermediate server that is in charge of dynamically generate web pages and of receiving requests through the web.
			\item \textbf{Application Server:} This is the most important Tier of the system. Here are done all the logics and calculations that constitute the core part of \myTaxiService{}.
			\item \textbf{Database Server:} In this Tier it is hosted the Database that allows the service data persistence.
		\end{itemize}
	\end{frame}
	
	\subsection{Overview Diagram}
		
	\begin{frame}{Overview Diagram}
		\showGeneralDiagram{Overview Diagram}{1.0}
	\end{frame}
	
	\subsection{Component View}
	
	\begin{frame}{Component View}
		Several components has been designed to provide all the functionalities needed for \myTaxiService{} to work.
		Five mayor subsystems have been found:
		\begin{itemize}
			\item Passenger View, Taxi Driver View, Taxi Driver Model
			\item Controller
			\item Model
		\end{itemize}
	\end{frame}
	
	
	\begin{frame}{Component View - Diagram}
		This diagram maps system features into different software components, and show how these components are divided in different subsystems.
		\showComponentDiagram{UML Component Diagram}{0.475}
	\end{frame}
	
	\subsection{Deployment View}
		
	\begin{frame}{Deployment View}
		The best way found to deploy the software components identified into different machines, is to consider 7 (8 if considering the Google Server contacted to use Google Maps API) different nodes:
		\begin{itemize}
			\item Passenger Web Browser, Passenger Smartphone, Taxi Driver Smartphone, Administrator Workstation
			\item Web Server
			\item Application Server
			\item Database Server
		\end{itemize}
	\end{frame}		
		
	\begin{frame}{Deployment View - Diagram}
		The following diagram shows how software components are mapped into the physical system.
		%TODO Collegamento GOOGLE SERVER <-> LOCATION MANAGER andrebbe reso un collegamento GOOGLE SERVER <-> WEB SERVER, per coerenza con quanto deciso di fare, cioè di avere solo il web server collegato ad internet
		\showDeploymentDiagram{UML Deployment Diagram}{0.625}
	\end{frame}
	
	\subsection{Runtime View}
		
	\begin{frame}{Runtime View}
		In this subsection are proposed the most meaningful \textbf{UML Sequence Diagrams} to show how software components interacts in order to deliver a specific functionality.
		These functionalities are:
		\begin{itemize}
			\item Taxi Driver Registration (done by an Administrator)
			\item Passenger Login
			\item Handling of a new Taxi Ride (2 diagrams)
			%TODO Il diagramma è mega complesso. Mettiamo o glissiamo?
			\item Update of Taxi Drivers' positions
		\end{itemize}
	\end{frame}
	
	\begin{frame}{Taxi Driver Registration}
		\showSequenceDiagram{admin_td_reg}{UML Sequence Diagram}{0.7}
	\end{frame}
	
	\begin{frame}{Passenger Login}
		\showSequenceDiagram{ps_login}{UML Sequence Diagram}{0.575}
	\end{frame}
	
	\begin{frame}{Handling of a new Taxi Ride - 1/2}
		\showSequenceDiagram{taxi_ride_arrived_handling}{UML Sequence Diagram}{0.9}
	\end{frame}
	
	\begin{frame}{Handling of a new Taxi Ride - 2/2}
		\showSequenceDiagram{tr_timer_expired}{UML Sequence Diagram}{0.9}
	\end{frame}
	
	\begin{frame}{Update of Taxi Drivers' positions}
		\showSequenceDiagram{td_position_association}{UML Sequence Diagram}{0.575}
	\end{frame}
	
	\subsection{Selected architectural styles and patterns}
	\begin{frame}{Selected architectural styles and patterns - MVC}
		Several architectural styles and patterns were chosen in order to build \myTaxiService{} as a modern software.
		The main pattern that was recursively adopted is the \textbf{Model View Controller} architectural pattern:
		\begin{itemize}
			\item \textbf{System Level:} All the clients that use \myTaxiService{} (i.e. the Passengers, the Taxi Drivers, and the Administrator) are seen as Views,
			that following the Cocoa MVC pattern, are connected to a Controller,
			the Web Server or the Application Server, that is itself connected to
			the Model that is hosted on the Database Server.
			\item \textbf{Client Level}
			\item \textbf{Server Level}
			\begin{itemize}
				\item Web Server
				\item Application Server
				\item Database Server
			\end{itemize}
		\end{itemize}
	\end{frame}
	
	\begin{frame}{Selected architectural styles and patterns - Client-Server}
		Alongside the \textbf{MVC} architectural pattern, also the \textbf{Client-Server} style is used for all the requests done by the various clients connected to the Web Server of \myTaxiService{}. The \textbf{Taxi Driver Application} and the \textbf{Passenger Application} can use a standardized \textbf{Client-Server} protocol via \textbf{HTTPS} that follows the principle of a \textbf{RESTful Service}. The \textbf{Administrator} application its connected via \textbf{RPC} to the \textbf{Web Server} and can perform more critical requests, like the registration of a new \textbf{Taxi Driver} into the system. It is required that the \textbf{Administrator} application opens a \textbf{RPC} connection to the \textbf{Web Server} to start the communication.
	\end{frame}
	
	\begin{frame}{Selected architectural styles and patterns - Point to Point}
		A \textbf{Point to Point} bidirectional messaging system is established between the \textbf{Clients} and the \textbf{Web Server} at the \textit{boot} of the client application. The client should explicitly request a connection to the server that is listening for clients' connections. It is the connection over \textbf{Web Socket} protocol that allows the \textbf{Web Server} to send asynchronous messages and requests to which the client can respond using the same channel. The main reasons why this protocol is used are sending a \textbf{Taxi Ride} proposal to a given \textbf{Taxi Driver}, that can either accept or deny the proposal, and allowing the server to ask the \textbf{Taxi Driver} an updated geolocation data.
	\end{frame}
	
	\begin{frame}{Selected architectural styles and patterns - Conclusion}
		The \textbf{Client-Server} style and \textbf{Point to Point} bidirectional messaging system are used to implement properly the \textbf{MVC} pattern in this three \textbf{Layers}, four \textbf{Tiers} system.
	\end{frame}
	
	\subsection{Other design decisions}
		
	\begin{frame}{Other design decisions - HTTPS and Web Socket}
		Several technologies have been chosen in order to best fit the needs of the system to be.
		Not all the required functionalities of \myTaxiService{} are already mapped onto specific products because in those cases the choice done would matter less.
		But for the cases in which a technology has already been proposed, it is because a clear design decision was mandatory.
		As for the communication protocols between clients (excluded the Administrator client) and the server have been chosen:
		\begin{itemize}
			\itemBold{HTTPS} The secure version of \textbf{HTTP} was a mandatory choice as security and privacy concerns are of major importance nowadays.
			\itemBold{Web Socket} This innovative socket technology has been chosen although is relatively new because it implements a full duplex socket communication channel using web technology and therefore using the port 80, which is in almost every case not blocked by any firewall.
		\end{itemize}
	\end{frame}
	
	
	\begin{frame}{Other design decisions - Internet and Firewalls}
		For what concerns the network reachability has been chosen to make discoverable only the Web Server through the assignment to it of a public IP.
		All the other servers in \myTaxiService{} system should be reachable only within the enterprise network.
		Between the \textbf{Web Server} and the external network is installed a firewall that controls all the incoming connections.
		In particular it must accept only incoming \textbf{HTTPS} connections, \textbf{Web Socket} connections and \textbf{RPC} connections.
		A firewall is also used to protected the Database Server from the \textbf{Application Server} in the unlikely case that the \textbf{Application Server} is attacked through the \textbf{Web Server} or the \textbf{Application Server} for some reasons stops working correctly and start behaving in a way that will damage the application \textbf{Model}.
	\end{frame}
	
	
	\section{Algorithm Design}
	
	\subsection{Taxi Rides Serving Management}
	
	\begin{frame}{Taxi Rides Serving Management}
	\end{frame}
	
	\subsection{Geolocation}
	
	\begin{frame}{Geolocation}
	\end{frame}
	
	\section{User Interface Design}
	
	\subsection{UI Design}
	
	\begin{frame}{UI Design}
		In this section we provide the most important an meaningful mockups for every class of screen we have designed.
		In particular we provided three classes of UI:
		\begin{itemize}
			\itemBold {Passenger Mockups} this UI can be both Web based and Mobile Application based.
			\itemBold {Taxi Driver Mockups}
			\itemBold {Administrator Mockups}
		\end{itemize}
	\end{frame}
	
	\subsection{Passenger Mockups}
	
	\begin{frame}{Passenger Mockups}
		Below we will show the sequence of the \textbf{graphical states} that the application has to \textbf{render} in order to \textbf{create} and \textbf{handle} a Taxi Ride.
		Going deep, once logged in, the \textbf{Registered Passenger} will be redirected in the personal \textbf{Home page}: here he/she will be able to request or reserve e \textbf{Taxi Ride} and manage his/her personal profile.
	\end{frame}
	
	\begin{frame} {Passenger Mockups - Overview}
		The \textbf{Registered Passenger} can perform different actions:
		\begin{itemize}
			\item Request a Ride
			\item Reserve a Ride
			\item Logout
			\item Modify his profile
			\item Throw away a selected Ride
		\end{itemize}
		By clicking the \textbf{"Request a ride"} and \textbf{"Reserve a ride"} buttons the user is allowed to perform the relative actions.\\
		\textbf{Once requested a ride, the "Request a ride" button has to be disabled, in order to prevent multiple requests.}
	\end{frame}
	
	\begin{frame} {Passenger Mockups - Personal Homepage}
		This is the \textbf{Registered Passenger}' \textbf{Home page}. The screen is divided in two parts:
		\begin{itemize}
			\item The left one dedicated to contain the \textbf{Taxi Requests}
			\item The right one dedicated to contain the \textbf{Taxi Reservations}
		\end{itemize} 
		\showRPMockupImage{RegisteredPassengerHomePage}{Empty state of RP home page.}{0.65}
	\end{frame}
	
	\begin{frame} {Passenger Mockups - Request a Ride}
			\showRPMockupImage{RequestTaxi}{Taxi request.}{0.9}
	\end{frame}
	
	\begin{frame} {Passenger Mockups - Reserve a Ride}
		\showRPMockupImage{ReserveTaxi}{Taxi reservation.}{0.9}
	\end{frame}
	
	\begin{frame} {Passenger Mockups - Personal Homepage with \textbf{Taxi Rides}}
		Below is shown a common \textbf{Application State} with a \textbf{Taxi Request} and \textbf{Taxi Reservation}. 
		Through the trash icon the user is allowed to cancel the selected \textbf{Taxi Ride}.
		\showRPMockupImage{RegisteredPassengerHomePage2}{Populated state of RP home page.}{0.75}
	\end{frame}
	
	\subsection{Taxi Driver Mockups}
	
	\begin{frame}{Taxi Driver Mockups}
		Below we will show the sequence of the \textbf{graphical states} that the application has to \textbf{render} in order to make the \textbf{Taxi Driver} able to \textbf{handle} a \textbf{Taxi Ride}.
	\end{frame}
	
	\begin{frame} {Taxi Driver Mockups - Overview}
		The \textbf{Taxi Driver} personal screen is divided into two sections:
		\begin{itemize}
			\item Pending Rides Space
			\item Serving Rides Space
		\end{itemize}
		When the system sends a \textbf{Taxi Ride} to a specific \textbf{Taxi Driver}, it is placed in the \textbf{Pending Requests} space.
		Here the \textbf{Taxi Request} can accept or deny it. 
		If is accepted the \textbf{Taxi Request} is moved from the previous to the second space.
		Once the ride is finished, the \textbf{Taxi Driver} has to push the \textbf{Notify End Of Ride} button, in order to notify the system to store and close the ride.
		Through the \textbf{Report Problem} button, the \textbf{Taxi Driver} has the possibility, in every moment of his/her working time, to signal an accident or a problem. In order to better handling the problem, the \textbf{Taxi Driver} is asked to signal if the problem is solvable or not.
		\begin{itemize}
			\item If it is solvable, the system store it and waits the solution message.
			\item If it is not solvable, the system assigns the incompleted ride to the next \textbf{Taxi Driver} in the \textbf{Zone Queue}.
		\end{itemize}
	\end{frame}
	
	\begin{frame} {Taxi Driver Mockups - No Requests}
		\showTDMockupImage{TaxiDriverScreen3}{Taxi Driver' Homepage without pending \textbf{Taxi Requests}.}{0.2}
	\end{frame}
	
	\begin{frame} {Taxi Driver Mockups - A Pending Request}
		\showTDMockupImage{TaxiDriverScreen1}{Taxi Driver' Homepage with a \textbf{PENDING} \textbf{Taxi Requests}.}{0.2}
	\end{frame}
	
	\begin{frame} {Taxi Driver Mockups - A Serving Request}
		\showTDMockupImage{TaxiDriverScreen2}{Taxi Driver' Homepage with a \textbf{SERVING} \textbf{Taxi Requests}.}{0.2}
	\end{frame}
	
	\subsection{Administrator Mockups}
	
	\begin{frame}{Administrator Mockups}
		The system architecture does not admit the usage of a textual "working" interface (e.g. a CLI). 
		For this reason we decided to provide the administrator of a thin desktop interface.
		Consequently the administrator can perform his actions both using a different channel from the normal application access, and using a intuitive an less aggressive UI.
		\showAdminMockupImage{admin_mockup_1}{An example of the administrator' screens.}{0.5}
	\end{frame}
	
\end{document}